Upgrading from SGAS 3.2 to 3.4

1. Stop SGAS

$ sudo /etc/init.d/sgas stop

2. Install new SGAS

$ tar xzf sgas-luts-service-3.3.tar.gz
$ cd sgas-luts-service-3.3
$ python setup.py build
$ sudo python setup.py install

3. Backup database

$sudo su - sgas                 # Or whatever user SGAS is running at
$ pg_dump sgas > sgas-db-backup.sql

4. Upgrade Database Schema

$ sudo su - sgas                # Or whatever user SGAS is running as
$ psql sgas                     # Or whatever the database is called
$ \i /usr/local/share/sgas/postgres/sgas-postgres-3.2-3.3-upgrade.sql
$ \i /usr/local/share/sgas/postgres/sgas-postgres-functions.sql
(and logout of postgres)

5. Start SGAS

$ sudo /etc/init.d/sgas start



Upgrading from SGAS 3.3 to 3.4

1. Stop SGAS

$ sudo /etc/init.d/sgas stop

2. Install new SGAS

$ tar xzf sgas-luts-service-3.4.tar.gz
$ cd sgas-luts-service-3.4
$ python setup.py build
$ sudo python setup.py install

3. Backup database

$sudo su - sgas                 # Or whatever user SGAS is running at
$ pg_dump sgas > sgas-db-backup.sql

4. Upgrade Database Schema

$ sudo su - sgas                # Or whatever user SGAS is running as
$ psql sgas                     # Or whatever the database is called
$ \i /usr/local/share/sgas/postgres/sgas-postgres-3.3-3.4-upgrade.sql
$ \i /usr/local/share/sgas/postgres/sgas-postgres-view.sql
$ \i /usr/local/share/sgas/postgres/sgas-postgres-functions.sql
(and logout of postgres)

5. Authorization Updates

The "check_whitelist" option in sgas.conf is no longer supported. Instead
create an entry in sgas.authz with the following structure:
"/CERT/NAME"        insert:machine_name=FQDN_IN_USAGERECORD
Alternatively, the "insert:all" declaration can be used to provide the subject
with insert rights for all machine names.

The syntax for allowing per-view access has also been changed. Change entries
from:
"/SUBJECT"      view:view_name
to:
"/SUBJECT"      view:view=view_name
Or better yet, switch to using viewgroups (see docs/views)


6. Start SGAS

$ sudo /etc/init.d/sgas start



Upgrading from SGAS 3.4.0/3.4.1 to 3.4.2

1. Stop SGAS

$ sudo /etc/init.d/sgas stop

2. Install new SGAS

$ tar xzf sgas-luts-service-3.4.2.tar.gz
$ cd sgas-luts-service-3.4.2
$ python setup.py build
$ sudo python setup.py install

3. Backup database

$sudo su - sgas                 # Or whatever user SGAS is running at
$ pg_dump sgas > sgas-db-backup.sql

4. Upgrade Database Schema

$ sudo su - sgas                # Or whatever user SGAS is running as
$ psql sgas                     # Or whatever the database is called
$ \i /usr/local/share/sgas/postgres/sgas-postgres-3.4-3.4.2-upgrade.sql
$ \i /usr/local/share/sgas/postgres/sgas-postgres-view.sql
$ \i /usr/local/share/sgas/postgres/sgas-postgres-functions.sql
(and logout of postgres)

5. Start SGAS

$ sudo /etc/init.d/sgas start



Upgrading from SGAS 3.4.2 to 3.5.0 / 3.5.1

1. Stop SGAS

$ sudo /etc/init.d/sgas stop

2. Install new SGAS

$ tar xzf sgas-luts-service-3.5.0.tar.gz
$ cd sgas-luts-service-3.5.0
$ python setup.py build
$ sudo python setup.py install

3. Backup database

$sudo su - sgas                 # Or whatever user SGAS is running at
$ pg_dump sgas > sgas-db-backup.sql

4. Upgrade Database Schema

$ sudo su - sgas                # Or whatever user SGAS is running as
$ psql sgas                     # Or whatever the database is called
$ \i /usr/local/share/sgas/postgres/sgas-postgres-3.4.2-3.5-upgrade.sql
$ \i /usr/local/share/sgas/postgres/sgas-postgres-view.sql
$ \i /usr/local/share/sgas/postgres/sgas-postgres-functions.sql
(and logout of postgres)

The upgrade script will take a bit of time to run the changes include a full
rewrite of the database.

5. Start SGAS

$ sudo /etc/init.d/sgas start



Upgrading from SGAS 3.5.0 / 3.5.1 to 3.5.1 / 3.5.2

1. Stop SGAS

$ sudo /etc/init.d/sgas stop

2. Install new SGAS

$ tar xzf sgas-luts-service-3.5.2.tar.gz
$ cd sgas-luts-service-3.5.2
$ python setup.py build
$ sudo python setup.py install

3. Backup database

$sudo su - sgas                 # Or whatever user SGAS is running at
$ pg_dump sgas > sgas-db-backup.sql

4. Start SGAS

$ sudo /etc/init.d/sgas start

