=== SGAS LUTS Installation Documentation ===

The LUTS service stores usage records in an underlaying database, and provides
a mechanism for retrieving aggregated information from these.


== Requirements ==

* Python 2.5 or later
* Twisted Core and Web (http://twistedmatrix.com/)
* PyOpenSSL (https://launchpad.net/pyopenssl)
* CouchDB or PostgreSQL as backend database.

Debian/Ubuntu:

Python comes stock
Packages: python-twisted python-twisted-web python-openssl

RedHat / CentOS

Typically the Python version is not new enough (Python 2.6 is recommended, 2.4
will NOT work, 2.5 might work but is not supported), Python and will have to be
installed manually with dependencies. See the redhat4-notes file for guides.

Packages: openssl-devel (for compiling pyopenssl)


== Database ==

See couchdb-setup for CouchDB setup or postgres-setup for PostgreSQL setup.
You only need to install one of them. The CouchDB backend is more well tested
than the PostgreSQL one, but PostgreSQL is probably the future for SGAS.


== Installation & Configuration ==

1. Unpack the tarball (you have probably already done this)
2. Run: python setup.py build
3. Run: sudo python setup.py install

Edit /etc/sgas.conf, the main settings you should worry about is:

# db.url - where to find the database. For CouchDB:
db=http://localhost:5984/usagerecords
For PostgreSQL:
db=localhost::sgas:sgas:sgas-password:
(first sgas is database, second is user)

# where to get js/css files (required for html views)
webfiles=/usr/share/sgas/webfiles

# authorization file
authzfile=/etc/sgas.authz

Hereafter edit /etc/sgas.authz to set which identities can perform which
actions. Subject names must in "", so a line would look like this:

"/O=Grid/O=NorduGrid/OU=ndgf.org/CN=Henrik Thostrup Jensen"     retrieval,view

which will allow retrieval of individual usage records, and access to all views
for the identity. You probably want to set who can insert usage records, and
who can access views.

